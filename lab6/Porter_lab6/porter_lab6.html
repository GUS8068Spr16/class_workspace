<html>
<head>	
	<title>PA counties by income</title>
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
	
</head>
	<style>
		body{background:silver; font-size:28px;}
	</style>
<body>
 <center>
	<h1>PA Counties by Income</h1>
	<h2>This map shows per capita income in all 67 PA counties</h2>
	<div id='map' style="height:700px; width:700px"></div>
 </center>


	<script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
	<script type="text/javascript" src="pacounties.js"></script>
	
	<script>
		
		var golf courses = new L.LayerGroup
		
		L.marker([39.94408, -75.208878]).addTo(map)
   	.bindPopup('Alexander Wilson Elementary School');
	
	L.marker([39.989227, -75.169495]).addTo(map)
   	.bindPopup('Anna B. Pratt Elementary School').addTo(hospitals);
	L.marker([39.941732, -75.226536]).addTo(map)
   	.bindPopup('Anna H. Shaw Middle School').addTo(hospitals);
	L.marker([39.979575, -75.110488]).addTo(map)
   	.bindPopup('Charles Carroll High School').addTo(hospitals);
	L.marker([39.898484, -75.245735]).addTo(map)
   	.bindPopup('Communications Technology School').addTo(hospitals);
	L.marker([39.925162, -75.160021]).addTo(map)
   	.bindPopup('Edward Bok Technical High School').addTo(hospitals);
	L.marker([39.994334, -75.142141]).addTo(map)
   	.bindPopup('Fairhill Elementary School').addTo(hospitals);
   	
   		 var Attr = 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
			'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
			'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
			Url = 'https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1Ijoiamthcm1hejYiLCJhIjoiY2ltM3ZjNTdjMDAwNXR6bTZ1NXU4M3A3NyJ9.b-8StdJWFpLK7LrLLermJg';
		
		var light = L.tileLayer(Url, {id: 'mapbox.light', attribution: Attr});
	var dark = L.tileLayer(Url, {id: 'mapbox.dark', attribution: Attr});
    var map = L.map('map', {center: [40.917946, -77.552847],
    				zoom: 6,
    				layers: [light, dark, hospitals]});
    				
    var baseMaps = {'Light' : light,
    			'Dark': dark};
    				
    var overlay = {'Large Hospitals': hospitals};
    
    L.control.layers(baseMaps, overlay).addTo(map);
    
    
    
    	var info = L.control();
    	info.onAdd = function (map)
    			{this._div = L.DomUtil.create('div', 'info');
    			this.update();
    			return this._div};
    			
    	info.update = function (Income)
    			{this._div.innerHTML = '<h4>Per Capita Income</h4>' + (Income ?
    				'<b>' + Income.County + '</b><br />' + Income.IncomeTotal + ' Income '
    				: 'Float over a County'); };
    	info.addTo(map);
		
	function getColor(d)
    	       { return d > 10000 ? '#f2f0f7' :
    			d > 15000 ? '#dadaeb' :
    			d > 25000 ? '#bcbddc' :
    			d > 35000 ? '#9e9ac8' :
    			d > 40000 ? '#756bb1' :
    				    '#54278f' ;	}
    			
    	function style(feature) { return {
    				fillColor: getColor(feature.properties.IncomeTotal), 
    				weight:2,
    				opacity: 1,
    				color:'gray',
    				dashArray: '2',
    				fillOpacity:0.8,
    				};} ;
    				
    	function highlightFeature(e) {
    		var layer = e.target;
    		
    		layer.setStyle({
    			weight: 5,
    			color: '#f7f4f9',
    			dashArray: '',
    			fillOpacity: 0.8
    		});
    		
    		if (!L.Browser.ie && !L.Browser.opera) {
			layer.bringToFront();
    		}
    		
    		info.update(layer.feature.properties);
    		}
    		
    		var counties;
    		
    		function resetHighlight(e) {
    			geojson.resetStyle(e.target);
    			info.update();
    		}
    		
    		function zoomToFeature(e) {
    			map.fitBounds(e.target.getBounds());
    		}
    		
    		function onEachFeature(feature, layer) {
    			layer.on({mouseover: highlightFeature,
    				mouseout: resetHighlight,
    				click: zoomToFeature
    			});
    		}
    		
    		geojson = L.geoJson(counties, {
    			style: style,
    			onEachFeature: onEachFeature
    		}).addTo(map);
    		
    	var legend = L.control({position: 'bottomright'});
    	
    	legend.onAdd = function (map)
    			{
    			var div = L.DomUtil.create('div', 'info legend'),
    			grades = [10000, 15000, 25000, 35000, 40000],
    			labels = [];
    			
    	for (var i = 0; i < grades.length; i++) {
        div.innerHTML +=
            '<i style="background:' + getColor(grades[i] + 1) + '"></i> ' +
            grades[i] + (grades[i + 1] ? '&ndash;' + grades[i + 1] + '<br>' : '+');
    	}
    	return div;
	};
legend.addTo(map);
	    
	  
	
    </script>
  </body>
  
</html>
